<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tizedes törtek – szorzás</title>

<style>
  body{margin:0;background:#f6f7fb;font-family:system-ui}
  .wrap{max-width:1000px;margin:auto;padding:20px}
  h1{margin:0 0 6px}
  .sub{color:#444;margin-bottom:14px}
  .controls{display:flex;gap:14px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
  button{
    border:0;padding:10px 16px;border-radius:10px;
    font-weight:700;cursor:pointer;background:#1f6feb;color:#fff
  }
  button.secondary{background:#2b2f36}
  button:disabled{opacity:.55;cursor:not-allowed}
  .score{
    font-weight:800;font-size:18px;
    background:#eef2ff;color:#243b8a;
    padding:8px 14px;border-radius:999px
  }
  .grid{display:grid;gap:12px}
  .card{
    background:#fff;border-radius:14px;padding:14px;
    box-shadow:0 6px 18px rgba(0,0,0,.06)
  }
  .tag{font-size:12px;background:#eef2ff;color:#243b8a;
       padding:4px 8px;border-radius:999px}
  .task{margin:10px 0;font-size:20px}
  input{
    padding:10px 12px;border-radius:10px;
    border:1px solid #cfd6e4;font-size:16px
  }
  input:disabled{background:#f1f3f8}
  .result{margin-top:8px;font-size:14px}
  .ok{color:#0a7a2f;font-weight:800}
  .bad{color:#b00020;font-weight:800}
  .mono{font-family:ui-monospace}
</style>
</head>

<body>
<div class="wrap">
<h1>Tizedes törtek – szorzás</h1>
<p class="sub">
10 feladat: 5× tizedes·egész és 5× tizedes·tizedes  
(egész rész 0–90, tized / század / ezred)
</p>

<div class="controls">
  <button id="checkBtn">Ellenőrzés</button>
  <button id="newBtn" class="secondary">Új feladatsor</button>
  <div id="score" class="score">0/10</div>
</div>

<div id="tasks" class="grid"></div>
</div>

<script>
(() => {
  const tasksEl = document.getElementById("tasks");
  const checkBtn = document.getElementById("checkBtn");
  const newBtn = document.getElementById("newBtn");
  const scoreEl = document.getElementById("score");

  let problems = [];
  let locked = false;

  const rndInt = (a,b)=>Math.floor(Math.random()*(b-a+1))+a;
  const pick = a=>a[Math.floor(Math.random()*a.length)];

  function makeDecimal(){
    const i = rndInt(0,90);
    const dp = pick([1,2,3]);
    let f = rndInt(0,10**dp-1);
    if(f===0 && Math.random()<0.7) f = rndInt(1,10**dp-1);
    return i + f / 10**dp;
  }

  function hu(v){
    let s = v.toFixed(6).replace(/\.?0+$/,'');
    return s.replace('.',',');
  }

  function parseHu(s){
    return Number(String(s).replace(',','.'));
  }

  function exactMul(a,b){
    const da = (String(a).split('.')[1]||'').length;
    const db = (String(b).split('.')[1]||'').length;
    return Math.round(a*10**da)*Math.round(b*10**db)/10**(da+db);
  }

  function gen(){
    problems=[];
    for(let i=0;i<5;i++){
      const a=makeDecimal(), b=rndInt(2,99);
      problems.push({t:"tizedes · egész",q:`${hu(a)} × ${b} =`,a:exactMul(a,b)});
    }
    for(let i=0;i<5;i++){
      const a=makeDecimal(), b=makeDecimal();
      problems.push({t:"tizedes · tizedes",q:`${hu(a)} × ${hu(b)} =`,a:exactMul(a,b)});
    }
    problems.sort(()=>Math.random()-.5);
  }

  function draw(){
    tasksEl.innerHTML="";
    problems.forEach((p,i)=>{
      tasksEl.innerHTML+=`
      <div class="card">
        <div class="tag">${i+1}. feladat • ${p.t}</div>
        <div class="task mono">${p.q}</div>
        <input id="i${i}" ${locked?"disabled":""} placeholder="eredmény">
        <div id="r${i}" class="result"></div>
      </div>`;
    });
  }

  function check(){
    let good=0;
    problems.forEach((p,i)=>{
      const v=parseHu(document.getElementById("i"+i).value);
      const out=document.getElementById("r"+i);
      if(Math.abs(v-p.a)<=0.0005){
        good++;
        out.innerHTML=`<span class="ok">Helyes</span>`;
      }else{
        out.innerHTML=`<span class="bad">Hibás</span> – helyes: <b>${hu(p.a)}</b>`;
      }
      document.getElementById("i"+i).disabled=true;
    });
    scoreEl.textContent = `${good}/10`;
    checkBtn.disabled=true;
    locked=true;
  }

  function reset(){
    locked=false;
    checkBtn.disabled=false;
    scoreEl.textContent="0/10";
    gen(); draw();
  }

  checkBtn.onclick=check;
  newBtn.onclick=reset;

  reset();
})();
</script>
</body>
</html>
